<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <meta content="https://icyflame.github.io/dp.jpg" property="og:image">

  <meta content="Siddharth Kannan's Blog" property="og:site_name">

  
  <meta content="Day 90 - Goodbye Capture Groups, Hello Word Boundaries" property="og:title">
  

  
  <meta content="article" property="og:type">
  

  
  <meta content="443 words about software" property="og:description">
  

  
  <meta content="https://blog.siddharthkannan.in/2017/05/18/day-90/" property="og:url">
  

  
  <meta content="2017-05-18T00:00:00+00:00" property="article:published_time">
  <meta content="https://blog.siddharthkannan.in/about/" property="article:author">
  

  
  
  <meta content="100daysofwriting" property="article:section">
  
  

  
  
  

  <title>
    
    Day 90 - Goodbye Capture Groups, Hello Word Boundaries &middot; Siddharth Kannan's Blog
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="https://blog.siddharthkannan.in/public/css/poole.css">
  <link rel="stylesheet" href="https://blog.siddharthkannan.in/public/css/syntax.css">
  <link rel="stylesheet" href="https://blog.siddharthkannan.in/public/css/hyde.css">
  <link rel="stylesheet" href="https://blog.siddharthkannan.in/public/css/custom.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.siddharthkannan.in/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://blog.siddharthkannan.in/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Google Adsense -->
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
	(adsbygoogle = window.adsbygoogle || []).push({
		google_ad_client: "ca-pub-1148465602033451",
		enable_page_level_ads: true
	});
  </script>
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h2>
        <a href="https://blog.siddharthkannan.in/">
          Siddharth Kannan's Blog
        </a>
      </h2>
      <p class="lead">Programmer | Pianist <br/><a href="http://icyflame.github.io">@icyflame</a></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="https://blog.siddharthkannan.in/">Home</a>

      

      
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="https://blog.siddharthkannan.in/about/">About</a>
            <!-- about/ -->
          
        
      
        
          
            <a class="sidebar-nav-item" href="https://blog.siddharthkannan.in/list/">List of Posts</a>
            <!-- list/ -->
          
        
      
        
          
            <a class="sidebar-nav-item" href="https://blog.siddharthkannan.in/tag/">List of Posts by Tag</a>
            <!-- tag/ -->
          
        
      
        
          
            <a class="sidebar-nav-item" href="https://blog.siddharthkannan.in/series">List of Series</a>
            <!-- series -->
          
        
      
        
          
            <a class="sidebar-nav-item" href="https://blog.siddharthkannan.in/rss/">RSS</a>
            <!-- rss/ -->
          
        
      

      <span class="sidebar-nav-item">Powered by <a href="https://jekyllrb.com">Jekyll</a>
			  and <a href="https://github.com/poole/hyde">Hyde</a></span>
      <span class="sidebar-nav-item">Hosted on <a href="https://github.com">Github</a></span>
    </nav>

    <p>&copy; 2024. All rights reserved.</p>
  </div>
</div>


    <div class="content container-fluid">
      <div class="post">
  <h1 class="post-title">Day 90 - Goodbye Capture Groups, Hello Word Boundaries</h1>
  <span class="post-date">18 May 2017</span>

  
  <span class="post-date">
  

  
  <a href="https://blog.siddharthkannan.in/tag/#100daysofwriting">
    100daysofwriting
  </a>
  
    &middot;
  
  
  <a href="https://blog.siddharthkannan.in/tag/#regex">
    regex
  </a>
  
    &middot;
  
  
  <a href="https://blog.siddharthkannan.in/tag/#software">
    software
  </a>
  
    &middot;
  
  
  <a href="https://blog.siddharthkannan.in/tag/#work">
    work
  </a>
  
  
</span>


  
  <p>There was an interesting Regex problem to solve today. Insert commas in a number
according to the Indian numbering system. There’s an inherent asymmetry in the
Indian system</p>

<p>The number: 1 million</p>

<p>Indian: Rs. 10,00,000
American: Rs. 1,000,000</p>

<p>The first approach that I took was to use capture groups. Capture the last three
digits, put a comma in front of them, then the next two and so on. This would
have worked if all the numbers that this replacement needed to happen on were of
the same number of digits. That kind of thing never happens in real life.</p>

<p>Scouring the internet, I eventually landed on the Regex used to insert commas
according to the American system. The regex looked like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>str.replace(/\B(?=(\d{3})+(?!\d))/g, ",")
</code></pre></div></div>

<p>I know a fair amount of Regex from having used <code class="language-plaintext highlighter-rouge">sed</code> inside and outside <code class="language-plaintext highlighter-rouge">vim</code>
regularly to replace text. This regex had a lot of things that I didn’t
recognize. <code class="language-plaintext highlighter-rouge">\B</code>, <code class="language-plaintext highlighter-rouge">?=</code>, <code class="language-plaintext highlighter-rouge">?!</code> and also some parentheses which weren’t working as
group capturers and a comma appearing in the middle of two characters. I had
never seen that before.</p>

<p>Then, I found <a href="http://www.regular-expressions.info">this website</a> which has
incredibly detailed articles about all the operators that Regex supports and the
things that can be accomplished with it.</p>

<p>Armed with the knowledge of what “Not a word boundary \B” and Lookahead
assertion using <code class="language-plaintext highlighter-rouge">?=</code> means, I delved into finding a Regex that would solve the
problem.</p>

<p>The solution turned out to be a two step:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>str.replace(/\B(?=\d{3}$)/g, ",")
   .replace(/\B(?=(\d{2})+(?!\d),)/g, ",")
</code></pre></div></div>

<p>The first one <em>finds the first <strong>NOT a word boundary</strong> which is succeeded by 3
digits and the end of the string</em></p>

<p>The second regex looks for <em><strong>NOt a word boundaries</strong> that have exactly two
digits after them and stop matching when a comma is encountered.</em></p>

<p>All of this magic (not really.) is possible because Lookahead assertions don’t
<em>consume characters</em>. Consuming characters basically means that the regex
pointer moves forward from one character to the other after looking at it.
Lookahead assertions keep the pointer at the character being considered for a
match and simply lookahead and assert or <em>not</em> assert the stuff they have been
asked to.</p>

<p>I would love to have a look at how this is implemented in <code class="language-plaintext highlighter-rouge">sed</code> or
even <code class="language-plaintext highlighter-rouge">C++</code> for Node, but I am unreasonably sure I wouldn’t understand the
implementation. This “looking at the implementation and not understanding it”
will become a post inspiration in the future.</p>

<p><strong>P.S.</strong> All the code above is JavaScript, duh.</p>

<p><strong>POST #90 is OVER</strong></p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
    <li>
      <h3>
        <a href="https://blog.siddharthkannan.in/2024/08/31/wireguard-and-mtu-adventure/">
          Adventures with Wireguard and MTU
          <small>31 Aug 2024</small>
        </a>
      </h3>
    </li>
    
    <li>
      <h3>
        <a href="https://blog.siddharthkannan.in/2024/08/29/using-iphone-without-windows-or-apple/">
          Using an iPhone Without Windows or Apple Computers
          <small>29 Aug 2024</small>
        </a>
      </h3>
    </li>
    
    <li>
      <h3>
        <a href="https://blog.siddharthkannan.in/2024/06/12/book-review-delillo-white-noise/">
          Notes and Review - White Noise (DeLillo)
          <small>12 Jun 2024</small>
        </a>
      </h3>
    </li>
    
  </ul>
</div>

<!-- Disqus Thread -->

<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'siddharthkannanblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <!-- <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> -->

    </div>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YE2VZMP9F1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YE2VZMP9F1');
</script>


  </body>
</html>
